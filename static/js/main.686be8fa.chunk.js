(this.webpackJsonpeartrain=this.webpackJsonpeartrain||[]).push([[0],{10:function(e,t,n){},26:function(e,t,n){e.exports=n(37)},31:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),o=n(19),c=n.n(o),r=(n(31),n(13)),s=n(8),i=n(9),u=n(24),m=n(20),h=n(12),k=n(25),E=n(2),N=n(6),p=(n(10),function(){function e(){Object(s.a)(this,e),this.note_stack=[],this.guess_stack=[],this.result_stack=[],this.start=!1,this.addGuess=this.addGuess.bind(this),this.addNote=this.addNote.bind(this),this.calcScore=this.calcScore.bind(this)}return Object(i.a)(e,[{key:"addNote",value:function(e){for(;this.guess_stack.length!==this.note_stack.length;)this.guess_stack.unshift("-");this.note_stack.unshift(e)}},{key:"addNoteArr",value:function(e){for(;this.guess_stack.length!==this.note_stack.length;)this.guess_stack.unshift("-");for(var t in e)this.note_stack.unshift(e[t])}},{key:"addGuess",value:function(e){return this.guess_stack.length!==this.note_stack.length?(console.log(this.note_stack),this.guess_stack.unshift(e),this.result_stack.unshift(e===this.note_stack[this.note_stack.length-this.guess_stack.length])):console.log("wrong length"),this.result_stack[0]}},{key:"calcScore",value:function(){for(var e=0,t=0;t<this.note_stack.length;++t)t<this.guess_stack.length&&this.note_stack[t]===this.guess_stack[t]&&++e;return 0===e?[0,0]:[e,Math.round(e/this.note_stack.length*100)]}}]),e}());function C(e){return l.a.createElement("div",{className:"key",onClick:function(t){return e.onNoteClick(e.name)}})}function d(e){return l.a.createElement("div",{className:"key black",onClick:function(t){return e.onNoteClick(e.name)}})}function g(e){return l.a.createElement("div",{className:"piano"},l.a.createElement(C,{name:"C4",onNoteClick:e.onNoteClick}),l.a.createElement(d,{name:"C#4",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"D4",onNoteClick:e.onNoteClick}),l.a.createElement(d,{name:"Eb4",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"E4",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"F4",onNoteClick:e.onNoteClick}),l.a.createElement(d,{name:"F#4",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"G4",onNoteClick:e.onNoteClick}),l.a.createElement(d,{name:"Ab4",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"A4",onNoteClick:e.onNoteClick}),l.a.createElement(d,{name:"Bb4",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"B4",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"C5",onNoteClick:e.onNoteClick}),l.a.createElement(d,{name:"C#5",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"D5",onNoteClick:e.onNoteClick}),l.a.createElement(d,{name:"Eb5",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"E5",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"F5",onNoteClick:e.onNoteClick}),l.a.createElement(d,{name:"F#5",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"G5",onNoteClick:e.onNoteClick}),l.a.createElement(d,{name:"Ab5",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"A5",onNoteClick:e.onNoteClick}),l.a.createElement(d,{name:"Bb5",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"B5",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"C6",onNoteClick:e.onNoteClick}))}function b(e){return l.a.createElement("div",{className:"piano phone"},l.a.createElement(C,{name:"C4",onNoteClick:e.onNoteClick}),l.a.createElement(d,{name:"C#4",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"D4",onNoteClick:e.onNoteClick}),l.a.createElement(d,{name:"Eb4",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"E4",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"F4",onNoteClick:e.onNoteClick}),l.a.createElement(d,{name:"F#4",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"G4",onNoteClick:e.onNoteClick}),l.a.createElement(d,{name:"Ab4",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"A4",onNoteClick:e.onNoteClick}),l.a.createElement(d,{name:"Bb4",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"B4",onNoteClick:e.onNoteClick}),l.a.createElement(C,{name:"C5",onNoteClick:e.onNoteClick}))}function _(e){return l.a.createElement("tr",null,l.a.createElement("th",{className:"Results-table-cell"},e.index,"."),l.a.createElement("th",{className:"Results-table-cell"},e.guess),l.a.createElement("th",{className:"Results-table-cell"},e.note),l.a.createElement("th",{className:"Results-table-cell"},e.result?"\u2713":"X"))}var v=function(e){return l.a.createElement("div",{className:"App App-header"},l.a.createElement("h2",null,"Score: ",e.score[1],"% (",e.score[0]," / ",e.results.length,")"),l.a.createElement("table",{className:"Results-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"Results-table-cell"}),l.a.createElement("th",{className:"Results-table-cell"},"Guess"),l.a.createElement("th",{className:"Results-table-cell"},"Note"),l.a.createElement("th",{className:"Results-table-cell"},"Result"))),l.a.createElement("tbody",null,e.guesses.map((function(t,n){return[t,e.notes[n],e.results[n]]})).map((function(t,n){return l.a.createElement(_,{key:n,index:e.guesses.length-n,guess:t[0],note:t[1],result:t[2]})})))))};var f=function(){return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("h1",null,"Settings"),l.a.createElement("p",null,l.a.createElement(E.c,{to:"/"},l.a.createElement("button",{className:"App-button colorGreen"},"Home")),l.a.createElement(E.c,{to:"/train"},l.a.createElement("button",{className:"App-button colorCoral"},"Start Training")))))},y=n(23),A=n.n(y),S=["C4","C#4","D4","Eb4","E4","F4","F#4","G4","Ab4","A4","Bb4","B4","C5","C#5","D5","Eb5","E5","F5","F#5","G5","Ab5","A5","Bb5","B5","C6"];var w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"major",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{oscillator:{type:"triangle"},envelope:{attackCurve:"exponential",attack:.02,decayCurve:"exponential",decay:.01,sustain:.2,releaseCurve:"exponential",release:.4},portamento:0,volume:-12};switch(Object(s.a)(this,e),this.int_note_arr=[],this.prev_note_index=-1,this.synth=new A.a.Synth(l).toMaster(),a){case"major":this.int_note_arr=[0,2,4,5,7,9,11,12];break;case"minor":this.int_note_arr=[1,2,3,5,7,8,10,11,12]}this.max_leap=n,this.num_notes=t,this.random_note=this.random_note.bind(this),this.play_note=this.play_note.bind(this),this.play_rand_note=this.play_rand_note.bind(this)}return Object(i.a)(e,[{key:"random_note",value:function(){return-1===this.prev_note_index?(this.prev_note_index=(e=this.int_note_arr.length,Math.floor(Math.random()*e)),S[this.int_note_arr[this.prev_note_index]]):(this.prev_note_index=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=Math.max(a,e-t),o=Math.min(e+t,n);return l+Math.floor(Math.random()*(o-l+1))}(this.prev_note_index,this.max_leap,this.int_note_arr.length-1),S[this.int_note_arr[this.prev_note_index]]);var e}},{key:"play_note",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"4n";this.synth.triggerAttackRelease(e,t)}},{key:"play_notes",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"4n",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=.25,l=0;l<e.length;++l)this.synth.triggerAttackRelease(e[l],t,"+"+a),a+=n}},{key:"play_rand_note",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"4n",t=this.random_note(e);return this.play_note(t),t}},{key:"play_rand_seq",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"4n",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],a=.25,l=0;l<this.num_notes;++l)n[l]=this.random_note(),this.synth.triggerAttackRelease(n[l],e,"+"+a),a+=t;return n}}]),e}(),j=new p,O=null;function x(e){var t=Object(a.useState)(""),n=Object(r.a)(t,2),o=n[0],c=n[1];return l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement(E.b,{to:"/train"},l.a.createElement("button",{className:"App-button colorGreen",onClick:e.onStart},"Start")),l.a.createElement(E.b,{to:"/settings"},l.a.createElement("button",{className:"App-button colorCoral"},"Settings")),l.a.createElement(E.b,{to:"/results"},l.a.createElement("button",{className:"App-button colorYellow"},"Results"))),l.a.createElement("div",null,l.a.createElement("p",null,"Play a Note:"),l.a.createElement(e.ui,{onNoteClick:function(e){console.log(e),null===O&&(O=new w),O.play_note(e),c(e)}}),l.a.createElement("p",null,"Note Played:"),l.a.createElement("p",null,o)))}function G(e){var t=Object(a.useState)(""),n=Object(r.a)(t,2),o=n[0],c=n[1],s=Object(a.useState)(""),i=Object(r.a)(s,2),u=i[0],m=i[1],h=Object(a.useState)(null),k=Object(r.a)(h,2),N=k[0],p=k[1];return l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement(E.b,{to:"/"},l.a.createElement("button",{className:"App-button colorGreen"},"Stop")),l.a.createElement(E.b,{to:"/settings"},l.a.createElement("button",{className:"App-button colorCoral"},"Settings")),l.a.createElement(E.b,{to:"/results"},l.a.createElement("button",{className:"App-button colorYellow"},"Results"))),l.a.createElement("div",{className:"App"},l.a.createElement("div",null,e.replay&&l.a.createElement("button",{className:"App-button colorYellow",onClick:function(t){null!==O&&(console.log("replay:",o),O.play_notes(o,e.duration,e.gap))}},"Replay"),l.a.createElement("button",{className:"App-button colorGreen",onClick:function(t){null===O&&(O=new w);var n=O.play_rand_seq(e.duration,e.gap);c(n),console.log(n),j.addNoteArr(n)}},"Next Note")),l.a.createElement(e.ui,{onNoteClick:function(e){j.guessed||m(e),p(j.addGuess(e))}}),l.a.createElement("p",null,"You Guessed:"),l.a.createElement("p",null,u,null===N?"":N?" : Correct":" : Incorrect")))}function R(e){return l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement(E.b,{to:"/"},l.a.createElement("button",{className:"App-button colorGreen"},"Start Over")),l.a.createElement(E.b,{to:"/settings"},l.a.createElement("button",{className:"App-button colorCoral"},"Settings")),l.a.createElement(E.b,{to:"/train"},l.a.createElement("button",{className:"App-button colorYellow"},"Continue"))),l.a.createElement(v,{guesses:j.guess_stack,notes:j.note_stack,results:j.result_stack,score:j.calcScore()}))}var B=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={ui:"piano",range:2,duration:"4n",num:3,gap:1},n.onStart=n.onStart.bind(Object(h.a)(n)),n.swapUI=n.swapUI.bind(Object(h.a)(n)),n}return Object(k.a)(t,e),Object(i.a)(t,[{key:"onStart",value:function(){console.log("resetting train data"),j=new p,O=new w}},{key:"swapUI",value:function(){1===this.state.range?(this.setState({range:2}),console.log(this.state)):2===this.state.range&&(this.setState({range:1}),console.log(this.state))}},{key:"render",value:function(){var e,t=this;return"piano"===this.state.ui&&(e=1===this.state.range?b:g),l.a.createElement("header",{className:"App App-header"},l.a.createElement("h1",null,"Aural Training"),l.a.createElement("button",{onClick:function(e){return t.swapUI()}},"UI"),l.a.createElement(E.a,null,l.a.createElement(N.c,null,l.a.createElement(N.a,{path:"/settings"},l.a.createElement(f,null)),l.a.createElement(N.a,{path:"/results"},l.a.createElement(R,{trainData:j})),l.a.createElement(N.a,{path:"/train"},l.a.createElement(G,{trainData:j,replay:!0,ui:e,range:this.state.range,duration:this.state.duration,num:this.state.num,gap:this.state.gap})),l.a.createElement(N.a,{path:"/"},l.a.createElement(x,{onStart:this.onStart,ui:e,range:this.state.range,duration:this.state.duration,num:this.state.num,gap:this.state.gap})))))}}]),t}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(E.a,null,l.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.686be8fa.chunk.js.map